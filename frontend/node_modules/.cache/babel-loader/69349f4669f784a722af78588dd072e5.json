{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { node, bool, string, any, arrayOf, oneOfType, object, func } from 'prop-types';\nimport * as constants from 'focus-lock/constants';\nimport { useMergeRefs } from 'use-callback-ref';\nimport { useEffect } from 'react';\nimport { hiddenGuard } from './FocusGuard';\nimport { mediumFocus, mediumBlur, mediumSidecar } from './medium';\nvar emptyArray = [];\nvar FocusLock = /*#__PURE__*/React.forwardRef(function FocusLockUI(props, parentRef) {\n  var _extends2;\n\n  var _React$useState = React.useState(),\n      realObserved = _React$useState[0],\n      setObserved = _React$useState[1];\n\n  var observed = React.useRef();\n  var isActive = React.useRef(false);\n  var originalFocusedElement = React.useRef(null);\n  var children = props.children,\n      disabled = props.disabled,\n      noFocusGuards = props.noFocusGuards,\n      persistentFocus = props.persistentFocus,\n      crossFrame = props.crossFrame,\n      autoFocus = props.autoFocus,\n      allowTextSelection = props.allowTextSelection,\n      group = props.group,\n      className = props.className,\n      whiteList = props.whiteList,\n      hasPositiveIndices = props.hasPositiveIndices,\n      _props$shards = props.shards,\n      shards = _props$shards === void 0 ? emptyArray : _props$shards,\n      _props$as = props.as,\n      Container = _props$as === void 0 ? 'div' : _props$as,\n      _props$lockProps = props.lockProps,\n      containerProps = _props$lockProps === void 0 ? {} : _props$lockProps,\n      SideCar = props.sideCar,\n      shouldReturnFocus = props.returnFocus,\n      focusOptions = props.focusOptions,\n      onActivationCallback = props.onActivation,\n      onDeactivationCallback = props.onDeactivation;\n\n  var _React$useState2 = React.useState({}),\n      id = _React$useState2[0]; // SIDE EFFECT CALLBACKS\n\n\n  var onActivation = React.useCallback(function () {\n    originalFocusedElement.current = originalFocusedElement.current || document && document.activeElement;\n\n    if (observed.current && onActivationCallback) {\n      onActivationCallback(observed.current);\n    }\n\n    isActive.current = true;\n  }, [onActivationCallback]);\n  var onDeactivation = React.useCallback(function () {\n    isActive.current = false;\n\n    if (onDeactivationCallback) {\n      onDeactivationCallback(observed.current);\n    }\n  }, [onDeactivationCallback]);\n  useEffect(function () {\n    if (!disabled) {\n      // cleanup return focus on trap deactivation\n      // sideEffect/returnFocus should happen by this time\n      originalFocusedElement.current = null;\n    }\n  }, []);\n  var returnFocus = React.useCallback(function (allowDefer) {\n    var returnFocusTo = originalFocusedElement.current;\n\n    if (returnFocusTo && returnFocusTo.focus) {\n      var howToReturnFocus = typeof shouldReturnFocus === 'function' ? shouldReturnFocus(returnFocusTo) : shouldReturnFocus;\n\n      if (howToReturnFocus) {\n        var returnFocusOptions = typeof howToReturnFocus === 'object' ? howToReturnFocus : undefined;\n        originalFocusedElement.current = null;\n\n        if (allowDefer) {\n          // React might return focus after update\n          // it's safer to defer the action\n          Promise.resolve().then(function () {\n            return returnFocusTo.focus(returnFocusOptions);\n          });\n        } else {\n          returnFocusTo.focus(returnFocusOptions);\n        }\n      }\n    }\n  }, [shouldReturnFocus]); // MEDIUM CALLBACKS\n\n  var onFocus = React.useCallback(function (event) {\n    if (isActive.current) {\n      mediumFocus.useMedium(event);\n    }\n  }, []);\n  var onBlur = mediumBlur.useMedium; // REF PROPAGATION\n  // not using real refs due to race conditions\n\n  var setObserveNode = React.useCallback(function (newObserved) {\n    if (observed.current !== newObserved) {\n      observed.current = newObserved;\n      setObserved(newObserved);\n    }\n  }, []);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof allowTextSelection !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn('React-Focus-Lock: allowTextSelection is deprecated and enabled by default');\n    }\n\n    React.useEffect(function () {\n      // report incorrect integration - https://github.com/theKashey/react-focus-lock/issues/123\n      if (!observed.current && typeof Container !== 'string') {\n        // eslint-disable-next-line no-console\n        console.error('FocusLock: could not obtain ref to internal node');\n      }\n    }, []);\n  }\n\n  var lockProps = _extends((_extends2 = {}, _extends2[constants.FOCUS_DISABLED] = disabled && 'disabled', _extends2[constants.FOCUS_GROUP] = group, _extends2), containerProps);\n\n  var hasLeadingGuards = noFocusGuards !== true;\n  var hasTailingGuards = hasLeadingGuards && noFocusGuards !== 'tail';\n  var mergedRef = useMergeRefs([parentRef, setObserveNode]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, hasLeadingGuards && [\n  /*#__PURE__*/\n  // nearest focus guard\n  React.createElement(\"div\", {\n    key: \"guard-first\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: hiddenGuard\n  }), // first tabbed element guard\n  hasPositiveIndices ? /*#__PURE__*/React.createElement(\"div\", {\n    key: \"guard-nearest\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 1,\n    style: hiddenGuard\n  }) : null], !disabled && /*#__PURE__*/React.createElement(SideCar, {\n    id: id,\n    sideCar: mediumSidecar,\n    observed: realObserved,\n    disabled: disabled,\n    persistentFocus: persistentFocus,\n    crossFrame: crossFrame,\n    autoFocus: autoFocus,\n    whiteList: whiteList,\n    shards: shards,\n    onActivation: onActivation,\n    onDeactivation: onDeactivation,\n    returnFocus: returnFocus,\n    focusOptions: focusOptions\n  }), /*#__PURE__*/React.createElement(Container, _extends({\n    ref: mergedRef\n  }, lockProps, {\n    className: className,\n    onBlur: onBlur,\n    onFocus: onFocus\n  }), children), hasTailingGuards && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: hiddenGuard\n  }));\n});\nFocusLock.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: node,\n  disabled: bool,\n  returnFocus: oneOfType([bool, object, func]),\n  focusOptions: object,\n  noFocusGuards: bool,\n  hasPositiveIndices: bool,\n  allowTextSelection: bool,\n  autoFocus: bool,\n  persistentFocus: bool,\n  crossFrame: bool,\n  group: string,\n  className: string,\n  whiteList: func,\n  shards: arrayOf(any),\n  as: oneOfType([string, func, object]),\n  lockProps: object,\n  onActivation: func,\n  onDeactivation: func,\n  sideCar: any.isRequired\n} : {};\nFocusLock.defaultProps = {\n  children: undefined,\n  disabled: false,\n  returnFocus: false,\n  focusOptions: undefined,\n  noFocusGuards: false,\n  autoFocus: true,\n  persistentFocus: false,\n  crossFrame: true,\n  hasPositiveIndices: undefined,\n  allowTextSelection: undefined,\n  group: undefined,\n  className: undefined,\n  whiteList: undefined,\n  shards: undefined,\n  as: 'div',\n  lockProps: {},\n  onActivation: undefined,\n  onDeactivation: undefined\n};\nexport default FocusLock;","map":{"version":3,"sources":["C:/Users/HP/Desktop/pfe/node_modules/react-focus-lock/dist/es2015/Lock.js"],"names":["_extends","React","node","bool","string","any","arrayOf","oneOfType","object","func","constants","useMergeRefs","useEffect","hiddenGuard","mediumFocus","mediumBlur","mediumSidecar","emptyArray","FocusLock","forwardRef","FocusLockUI","props","parentRef","_extends2","_React$useState","useState","realObserved","setObserved","observed","useRef","isActive","originalFocusedElement","children","disabled","noFocusGuards","persistentFocus","crossFrame","autoFocus","allowTextSelection","group","className","whiteList","hasPositiveIndices","_props$shards","shards","_props$as","as","Container","_props$lockProps","lockProps","containerProps","SideCar","sideCar","shouldReturnFocus","returnFocus","focusOptions","onActivationCallback","onActivation","onDeactivationCallback","onDeactivation","_React$useState2","id","useCallback","current","document","activeElement","allowDefer","returnFocusTo","focus","howToReturnFocus","returnFocusOptions","undefined","Promise","resolve","then","onFocus","event","useMedium","onBlur","setObserveNode","newObserved","process","env","NODE_ENV","console","warn","error","FOCUS_DISABLED","FOCUS_GROUP","hasLeadingGuards","hasTailingGuards","mergedRef","createElement","Fragment","key","tabIndex","style","ref","propTypes","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { node, bool, string, any, arrayOf, oneOfType, object, func } from 'prop-types';\nimport * as constants from 'focus-lock/constants';\nimport { useMergeRefs } from 'use-callback-ref';\nimport { useEffect } from 'react';\nimport { hiddenGuard } from './FocusGuard';\nimport { mediumFocus, mediumBlur, mediumSidecar } from './medium';\nvar emptyArray = [];\nvar FocusLock = /*#__PURE__*/React.forwardRef(function FocusLockUI(props, parentRef) {\n  var _extends2;\n\n  var _React$useState = React.useState(),\n      realObserved = _React$useState[0],\n      setObserved = _React$useState[1];\n\n  var observed = React.useRef();\n  var isActive = React.useRef(false);\n  var originalFocusedElement = React.useRef(null);\n  var children = props.children,\n      disabled = props.disabled,\n      noFocusGuards = props.noFocusGuards,\n      persistentFocus = props.persistentFocus,\n      crossFrame = props.crossFrame,\n      autoFocus = props.autoFocus,\n      allowTextSelection = props.allowTextSelection,\n      group = props.group,\n      className = props.className,\n      whiteList = props.whiteList,\n      hasPositiveIndices = props.hasPositiveIndices,\n      _props$shards = props.shards,\n      shards = _props$shards === void 0 ? emptyArray : _props$shards,\n      _props$as = props.as,\n      Container = _props$as === void 0 ? 'div' : _props$as,\n      _props$lockProps = props.lockProps,\n      containerProps = _props$lockProps === void 0 ? {} : _props$lockProps,\n      SideCar = props.sideCar,\n      shouldReturnFocus = props.returnFocus,\n      focusOptions = props.focusOptions,\n      onActivationCallback = props.onActivation,\n      onDeactivationCallback = props.onDeactivation;\n\n  var _React$useState2 = React.useState({}),\n      id = _React$useState2[0]; // SIDE EFFECT CALLBACKS\n\n\n  var onActivation = React.useCallback(function () {\n    originalFocusedElement.current = originalFocusedElement.current || document && document.activeElement;\n\n    if (observed.current && onActivationCallback) {\n      onActivationCallback(observed.current);\n    }\n\n    isActive.current = true;\n  }, [onActivationCallback]);\n  var onDeactivation = React.useCallback(function () {\n    isActive.current = false;\n\n    if (onDeactivationCallback) {\n      onDeactivationCallback(observed.current);\n    }\n  }, [onDeactivationCallback]);\n  useEffect(function () {\n    if (!disabled) {\n      // cleanup return focus on trap deactivation\n      // sideEffect/returnFocus should happen by this time\n      originalFocusedElement.current = null;\n    }\n  }, []);\n  var returnFocus = React.useCallback(function (allowDefer) {\n    var returnFocusTo = originalFocusedElement.current;\n\n    if (returnFocusTo && returnFocusTo.focus) {\n      var howToReturnFocus = typeof shouldReturnFocus === 'function' ? shouldReturnFocus(returnFocusTo) : shouldReturnFocus;\n\n      if (howToReturnFocus) {\n        var returnFocusOptions = typeof howToReturnFocus === 'object' ? howToReturnFocus : undefined;\n        originalFocusedElement.current = null;\n\n        if (allowDefer) {\n          // React might return focus after update\n          // it's safer to defer the action\n          Promise.resolve().then(function () {\n            return returnFocusTo.focus(returnFocusOptions);\n          });\n        } else {\n          returnFocusTo.focus(returnFocusOptions);\n        }\n      }\n    }\n  }, [shouldReturnFocus]); // MEDIUM CALLBACKS\n\n  var onFocus = React.useCallback(function (event) {\n    if (isActive.current) {\n      mediumFocus.useMedium(event);\n    }\n  }, []);\n  var onBlur = mediumBlur.useMedium; // REF PROPAGATION\n  // not using real refs due to race conditions\n\n  var setObserveNode = React.useCallback(function (newObserved) {\n    if (observed.current !== newObserved) {\n      observed.current = newObserved;\n      setObserved(newObserved);\n    }\n  }, []);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof allowTextSelection !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn('React-Focus-Lock: allowTextSelection is deprecated and enabled by default');\n    }\n\n    React.useEffect(function () {\n      // report incorrect integration - https://github.com/theKashey/react-focus-lock/issues/123\n      if (!observed.current && typeof Container !== 'string') {\n        // eslint-disable-next-line no-console\n        console.error('FocusLock: could not obtain ref to internal node');\n      }\n    }, []);\n  }\n\n  var lockProps = _extends((_extends2 = {}, _extends2[constants.FOCUS_DISABLED] = disabled && 'disabled', _extends2[constants.FOCUS_GROUP] = group, _extends2), containerProps);\n\n  var hasLeadingGuards = noFocusGuards !== true;\n  var hasTailingGuards = hasLeadingGuards && noFocusGuards !== 'tail';\n  var mergedRef = useMergeRefs([parentRef, setObserveNode]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, hasLeadingGuards && [\n  /*#__PURE__*/\n  // nearest focus guard\n  React.createElement(\"div\", {\n    key: \"guard-first\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: hiddenGuard\n  }), // first tabbed element guard\n  hasPositiveIndices ? /*#__PURE__*/React.createElement(\"div\", {\n    key: \"guard-nearest\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 1,\n    style: hiddenGuard\n  }) : null], !disabled && /*#__PURE__*/React.createElement(SideCar, {\n    id: id,\n    sideCar: mediumSidecar,\n    observed: realObserved,\n    disabled: disabled,\n    persistentFocus: persistentFocus,\n    crossFrame: crossFrame,\n    autoFocus: autoFocus,\n    whiteList: whiteList,\n    shards: shards,\n    onActivation: onActivation,\n    onDeactivation: onDeactivation,\n    returnFocus: returnFocus,\n    focusOptions: focusOptions\n  }), /*#__PURE__*/React.createElement(Container, _extends({\n    ref: mergedRef\n  }, lockProps, {\n    className: className,\n    onBlur: onBlur,\n    onFocus: onFocus\n  }), children), hasTailingGuards && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: hiddenGuard\n  }));\n});\nFocusLock.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: node,\n  disabled: bool,\n  returnFocus: oneOfType([bool, object, func]),\n  focusOptions: object,\n  noFocusGuards: bool,\n  hasPositiveIndices: bool,\n  allowTextSelection: bool,\n  autoFocus: bool,\n  persistentFocus: bool,\n  crossFrame: bool,\n  group: string,\n  className: string,\n  whiteList: func,\n  shards: arrayOf(any),\n  as: oneOfType([string, func, object]),\n  lockProps: object,\n  onActivation: func,\n  onDeactivation: func,\n  sideCar: any.isRequired\n} : {};\nFocusLock.defaultProps = {\n  children: undefined,\n  disabled: false,\n  returnFocus: false,\n  focusOptions: undefined,\n  noFocusGuards: false,\n  autoFocus: true,\n  persistentFocus: false,\n  crossFrame: true,\n  hasPositiveIndices: undefined,\n  allowTextSelection: undefined,\n  group: undefined,\n  className: undefined,\n  whiteList: undefined,\n  shards: undefined,\n  as: 'div',\n  lockProps: {},\n  onActivation: undefined,\n  onDeactivation: undefined\n};\nexport default FocusLock;"]},"metadata":{},"sourceType":"module"}