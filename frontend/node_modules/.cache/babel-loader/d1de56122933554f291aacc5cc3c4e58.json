{"ast":null,"code":"// src/use-image.ts\nimport { useSafeLayoutEffect } from \"@chakra-ui/react-use-safe-layout-effect\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\n\nfunction useImage(props) {\n  const {\n    loading,\n    src,\n    srcSet,\n    onLoad,\n    onError,\n    crossOrigin,\n    sizes,\n    ignoreFallback\n  } = props;\n  const [status, setStatus] = useState(\"pending\");\n  useEffect(() => {\n    setStatus(src ? \"loading\" : \"pending\");\n  }, [src]);\n  const imageRef = useRef();\n  const load = useCallback(() => {\n    if (!src) return;\n    flush();\n    const img = new Image();\n    img.src = src;\n    if (crossOrigin) img.crossOrigin = crossOrigin;\n    if (srcSet) img.srcset = srcSet;\n    if (sizes) img.sizes = sizes;\n    if (loading) img.loading = loading;\n\n    img.onload = event => {\n      flush();\n      setStatus(\"loaded\");\n      onLoad == null ? void 0 : onLoad(event);\n    };\n\n    img.onerror = error => {\n      flush();\n      setStatus(\"failed\");\n      onError == null ? void 0 : onError(error);\n    };\n\n    imageRef.current = img;\n  }, [src, crossOrigin, srcSet, sizes, onLoad, onError, loading]);\n\n  const flush = () => {\n    if (imageRef.current) {\n      imageRef.current.onload = null;\n      imageRef.current.onerror = null;\n      imageRef.current = null;\n    }\n  };\n\n  useSafeLayoutEffect(() => {\n    if (ignoreFallback) return void 0;\n\n    if (status === \"loading\") {\n      load();\n    }\n\n    return () => {\n      flush();\n    };\n  }, [status, load, ignoreFallback]);\n  return ignoreFallback ? \"loaded\" : status;\n}\n\nvar shouldShowFallbackImage = (status, fallbackStrategy) => status !== \"loaded\" && fallbackStrategy === \"beforeLoadOrError\" || status === \"failed\" && fallbackStrategy === \"onError\";\n\nexport { useImage, shouldShowFallbackImage };","map":{"version":3,"sources":["C:/Users/HP/Desktop/pfe/node_modules/@chakra-ui/image/dist/chunk-HR33I6FK.mjs"],"names":["useSafeLayoutEffect","useCallback","useEffect","useRef","useState","useImage","props","loading","src","srcSet","onLoad","onError","crossOrigin","sizes","ignoreFallback","status","setStatus","imageRef","load","flush","img","Image","srcset","onload","event","onerror","error","current","shouldShowFallbackImage","fallbackStrategy"],"mappings":"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","sourcesContent":["// src/use-image.ts\nimport { useSafeLayoutEffect } from \"@chakra-ui/react-use-safe-layout-effect\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nfunction useImage(props) {\n  const {\n    loading,\n    src,\n    srcSet,\n    onLoad,\n    onError,\n    crossOrigin,\n    sizes,\n    ignoreFallback\n  } = props;\n  const [status, setStatus] = useState(\"pending\");\n  useEffect(() => {\n    setStatus(src ? \"loading\" : \"pending\");\n  }, [src]);\n  const imageRef = useRef();\n  const load = useCallback(() => {\n    if (!src)\n      return;\n    flush();\n    const img = new Image();\n    img.src = src;\n    if (crossOrigin)\n      img.crossOrigin = crossOrigin;\n    if (srcSet)\n      img.srcset = srcSet;\n    if (sizes)\n      img.sizes = sizes;\n    if (loading)\n      img.loading = loading;\n    img.onload = (event) => {\n      flush();\n      setStatus(\"loaded\");\n      onLoad == null ? void 0 : onLoad(event);\n    };\n    img.onerror = (error) => {\n      flush();\n      setStatus(\"failed\");\n      onError == null ? void 0 : onError(error);\n    };\n    imageRef.current = img;\n  }, [src, crossOrigin, srcSet, sizes, onLoad, onError, loading]);\n  const flush = () => {\n    if (imageRef.current) {\n      imageRef.current.onload = null;\n      imageRef.current.onerror = null;\n      imageRef.current = null;\n    }\n  };\n  useSafeLayoutEffect(() => {\n    if (ignoreFallback)\n      return void 0;\n    if (status === \"loading\") {\n      load();\n    }\n    return () => {\n      flush();\n    };\n  }, [status, load, ignoreFallback]);\n  return ignoreFallback ? \"loaded\" : status;\n}\nvar shouldShowFallbackImage = (status, fallbackStrategy) => status !== \"loaded\" && fallbackStrategy === \"beforeLoadOrError\" || status === \"failed\" && fallbackStrategy === \"onError\";\n\nexport {\n  useImage,\n  shouldShowFallbackImage\n};\n"]},"metadata":{},"sourceType":"module"}